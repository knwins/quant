"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[266],{44721:function(le,U,s){var w=s(18201),t=s(75271),L=s(22800),l=s(60585),Z=function(S,b){return t.createElement(l.Z,(0,w.Z)((0,w.Z)({},S),{},{ref:b,icon:L.Z}))},d=t.forwardRef(Z);U.Z=d},71970:function(le,U,s){var w=s(18201),t=s(66342),L=s(75271),l=s(21092),Z=s(52676),d=["fieldProps","min","proFieldProps","max"],m=function(_,I){var O=_.fieldProps,y=_.min,V=_.proFieldProps,A=_.max,D=(0,t.Z)(_,d);return(0,Z.jsx)(l.Z,(0,w.Z)({valueType:"digit",fieldProps:(0,w.Z)({min:y,max:A},O),ref:I,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:V},D))},S=L.forwardRef(m);U.Z=S},5769:function(le,U,s){var w=s(60134),t=s(18201),L=s(66342),l=s(93954),Z=s(63292),d=s(25052),m=s(18051),S=s(75271),b=s(21092),_=s(52676),I=["fieldProps","proFieldProps"],O=["fieldProps","proFieldProps"],y="text",V=function(f){var p=f.fieldProps,E=f.proFieldProps,o=(0,L.Z)(f,I);return(0,_.jsx)(b.Z,(0,t.Z)({valueType:y,fieldProps:p,filedConfig:{valueType:y},proFieldProps:E},o))},A=function(f){var p=(0,l.Z)(f.open||!1,{value:f.open,onChange:f.onOpenChange}),E=(0,w.Z)(p,2),o=E[0],$=E[1];return(0,_.jsx)(Z.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(B){var j,K=B.getFieldValue(f.name||[]);return(0,_.jsx)(d.Z,(0,t.Z)((0,t.Z)({getPopupContainer:function(h){return h&&h.parentNode?h.parentNode:h},onOpenChange:function(h){return $(h)},content:(0,_.jsxs)("div",{style:{padding:"4px 0"},children:[(j=f.statusRender)===null||j===void 0?void 0:j.call(f,K),f.strengthText?(0,_.jsx)("div",{style:{marginTop:10},children:(0,_.jsx)("span",{children:f.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},f.popoverProps),{},{open:o,children:f.children}))}})},D=function(f){var p=f.fieldProps,E=f.proFieldProps,o=(0,L.Z)(f,O),$=(0,S.useState)(!1),H=(0,w.Z)($,2),B=H[0],j=H[1];return p!=null&&p.statusRender&&o.name?(0,_.jsx)(A,{name:o.name,statusRender:p==null?void 0:p.statusRender,popoverProps:p==null?void 0:p.popoverProps,strengthText:p==null?void 0:p.strengthText,open:B,onOpenChange:j,children:(0,_.jsx)("div",{children:(0,_.jsx)(b.Z,(0,t.Z)({valueType:"password",fieldProps:(0,t.Z)((0,t.Z)({},(0,m.Z)(p,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(g){var h;p==null||(h=p.onBlur)===null||h===void 0||h.call(p,g),j(!1)},onClick:function(g){var h;p==null||(h=p.onClick)===null||h===void 0||h.call(p,g),j(!0)}}),proFieldProps:E,filedConfig:{valueType:y}},o))})}):(0,_.jsx)(b.Z,(0,t.Z)({valueType:"password",fieldProps:p,proFieldProps:E,filedConfig:{valueType:y}},o))},F=V;F.Password=D,F.displayName="ProFormComponent",U.Z=F},16730:function(le,U,s){s.r(U),s.d(U,{default:function(){return j}});var w=s(90228),t=s.n(w),L=s(26068),l=s.n(L),Z=s(87999),d=s.n(Z),m=s(48305),S=s.n(m),b=s(44721),_=s(233),I=s(86074),O=s(34464),y=s(477),V=s(51027),A=s(66306),D=s(75271),F=s(98027),ee=s(71970),f=s(5769),p=s(61425),E=s(92528),o=s(52676),$=function(g){var h=g.done,J=g.visible,C=g.current,ae=g.onDone,Q=g.onSubmit,re=g.children,x=(0,O.useIntl)();if(!J)return null;var oe=(0,D.useState)([]),W=S()(oe,2),ne=W[0],X=W[1],k=(0,D.useState)([]),G=S()(k,2),te=G[0],q=G[1],z=(0,D.useState)([]),T=S()(z,2),se=T[0],Y=T[1],ue=(0,D.useState)(!0),N=S()(ue,2),n=N[0],r=N[1],a=function(v){var c=[];v&&(v.map(function(u){c.push(u.id)}),Y(c))},i=function(){var P=d()(t()().mark(function v(){var c,u;return t()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.next=2,(0,E.LW)({current:1,pageSize:1e3});case 2:c=ie.sent,u=c.data,q(u);case 5:case"end":return ie.stop()}},v)}));return function(){return P.apply(this,arguments)}}(),e=function(v){X(v),r(!0)},R=function P(v){return v.map(function(c){return c.children?{title:c.title,key:c.value,children:P(c.children)}:{title:c.title,key:c.value}})};(0,D.useEffect)(function(){i(),a(C==null?void 0:C.privileges)},[]);var M=function(v,c){Y(v)};return(0,o.jsx)(F.Y,{visible:J,title:h?null:"".concat(C!=null&&C.id?x.formatMessage({id:"pages.edit"}):x.formatMessage({id:"pages.new"})),width:640,onFinish:function(){var P=d()(t()().mark(function v(c){return t()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:c.privilegeIds=se,Q(c);case 2:case"end":return de.stop()}},v)}));return function(v){return P.apply(this,arguments)}}(),initialValues:C,submitter:{render:function(v,c){return h?null:c}},trigger:(0,o.jsx)(o.Fragment,{children:re}),modalProps:{onCancel:function(){return ae()},destroyOnClose:!0,bodyStyle:h?{padding:"72px 0"}:{}},children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ee.Z,{name:"id",hidden:!0}),(0,o.jsx)(f.Z,{name:"name",label:x.formatMessage({id:"pages.role.name"}),width:"lg",rules:[{required:!0,message:x.formatMessage({id:"pages.role.name.required"})}],placeholder:x.formatMessage({id:"pages.role.name.placeholder"})}),(0,o.jsx)("label",{style:{padding:"10px 0"},children:" \u6743\u9650\u914D\u7F6E"}),(0,o.jsx)(p.Z,{checkable:!0,onExpand:e,expandedKeys:ne,autoExpandParent:n,checkedKeys:se,treeData:R(te),onCheck:M})]})})},H=$,B=function(){var g=(0,D.useRef)(),h=(0,D.useState)(void 0),J=S()(h,2),C=J[0],ae=J[1],Q=(0,D.useState)(!1),re=S()(Q,2),x=re[0],oe=re[1],W=(0,D.useState)(!1),ne=S()(W,2),X=ne[0],k=ne[1],G=(0,D.useState)(),te=S()(G,2),q=te[0],z=te[1],T=(0,O.useIntl)(),se=function(){var r=d()(t()().mark(function a(i){var e,R,M,P,v;return t()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(e=y.ZP.loading(T.formatMessage({id:"pages.tip.loading"})),e(),u.prev=2,i.id==null){u.next=13;break}return u.next=6,(0,E.ul)(l()({},i));case 6:if(R=u.sent,M=R.success,!M){u.next=11;break}return y.ZP.success(T.formatMessage({id:"pages.tip.success"})),u.abrupt("return",!0);case 11:u.next=20;break;case 13:return u.next=15,(0,E._d)(l()({},i));case 15:if(P=u.sent,v=P.success,!v){u.next=20;break}return y.ZP.success(T.formatMessage({id:"pages.tip.success"})),u.abrupt("return",!0);case 20:return u.abrupt("return",!1);case 23:return u.prev=23,u.t0=u.catch(2),y.ZP.error(T.formatMessage({id:"pages.tip.error"})),u.abrupt("return",!1);case 27:case"end":return u.stop()}},a,null,[[2,23]])}));return function(i){return r.apply(this,arguments)}}(),Y=function(a){V.Z.confirm({title:T.formatMessage({id:"pages.tip.title"}),content:T.formatMessage({id:"pages.tip.content"}),okText:T.formatMessage({id:"pages.tip.ok"}),cancelText:T.formatMessage({id:"pages.tip.cancel"}),onOk:function(){var i=d()(t()().mark(function R(){var M,P,v;return t()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(a){u.next=2;break}return u.abrupt("return",!0);case 2:return u.prev=2,M=y.ZP.loading(T.formatMessage({id:"pages.tip.loading"})),u.next=6,(0,E.l5)({id:a.id});case 6:if(P=u.sent,v=P.success,!v){u.next=13;break}return M(),y.ZP.success(T.formatMessage({id:"pages.tip.success"})),g.current&&g.current.reload(),u.abrupt("return",!0);case 13:return u.abrupt("return",!1);case 16:return u.prev=16,u.t0=u.catch(2),y.ZP.error(T.formatMessage({id:"pages.tip.error"})),u.abrupt("return",!1);case 20:case"end":return u.stop()}},R,null,[[2,16]])}));function e(){return i.apply(this,arguments)}return e}()})},ue=function(){oe(!1),k(!1),z(void 0)},N={showSizeChanger:!0,showQuickJumper:!0},n=[{title:(0,o.jsx)(O.FormattedMessage,{id:"pages.role.name"}),dataIndex:"name",valueType:"text",hideInSearch:!0,hideInForm:!0,fieldProps:{precision:6}},{title:(0,o.jsx)(O.FormattedMessage,{id:"pages.option"}),dataIndex:"option",valueType:"option",hideInDescriptions:!0,render:function(a,i){return[(0,o.jsx)("a",{onClick:d()(t()().mark(function e(){var R,M,P;return t()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,E.cY)({id:i.id});case 2:R=c.sent,M=R.data,P=R.success,z(P?M:i),k(!0);case 7:case"end":return c.stop()}},e)})),children:(0,o.jsx)(O.FormattedMessage,{id:"pages.edit"})},"edit"),(0,o.jsx)("a",{onClick:function(){Y(i)},children:(0,o.jsx)(O.FormattedMessage,{id:"pages.delete"})},"delete")]}}];return(0,o.jsx)("div",{children:(0,o.jsxs)(_._z,{children:[(0,o.jsx)(I.ZP,{actionRef:g,pagination:N,rowKey:function(a){return a.id},params:C,search:!1,toolBarRender:function(){return[(0,o.jsxs)(A.ZP,{type:"primary",onClick:function(){k(!0)},children:[(0,o.jsx)(b.Z,{})," ",(0,o.jsx)(O.FormattedMessage,{id:"pages.new"})]},"primary")]},request:E.zU,columns:n,onChange:function(a,i,e){if(e){e.order=e.order==="descend"?"DESC":"ASC";var R={sorter:e.order,filter:e.field};ae(R)}}}),(0,o.jsx)(H,{done:x,visible:X,current:q||{},onDone:ue,onSubmit:function(){var r=d()(t()().mark(function a(i){var e;return t()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,se(i);case 2:e=M.sent,e&&(k(!1),z(void 0),g.current&&g.current.reload());case 4:case"end":return M.stop()}},a)}));return function(a){return r.apply(this,arguments)}}()})]})})},j=B},92528:function(le,U,s){s.d(U,{Ag:function(){return z},LW:function(){return V},Tb:function(){return _},Yj:function(){return O},ZD:function(){return S},_d:function(){return g},aI:function(){return re},cY:function(){return j},d_:function(){return ne},e5:function(){return p},l5:function(){return ae},po:function(){return k},q5:function(){return ee},qE:function(){return o},ul:function(){return J},xD:function(){return te},xd:function(){return ue},zU:function(){return H}});var w=s(90228),t=s.n(w),L=s(26068),l=s.n(L),Z=s(87999),d=s.n(Z),m=s(34464);function S(n,r){return b.apply(this,arguments)}function b(){return b=d()(t()().mark(function n(r,a){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("api/system/siteconfig/get",l()({params:l()({},r),method:"POST"},a||{})));case 1:case"end":return e.stop()}},n)})),b.apply(this,arguments)}function _(n,r){return I.apply(this,arguments)}function I(){return I=d()(t()().mark(function n(r,a){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("api/system/siteconfig/update",l()({data:r,method:"PUT"},a||{})));case 1:case"end":return e.stop()}},n)})),I.apply(this,arguments)}function O(n,r){return y.apply(this,arguments)}function y(){return y=d()(t()().mark(function n(r,a){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("api/system/privilege/list",l()({method:"POST",params:l()({},r)},a||{})));case 1:case"end":return e.stop()}},n)})),y.apply(this,arguments)}function V(n,r){return A.apply(this,arguments)}function A(){return A=d()(t()().mark(function n(r,a){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("api/system/privilege/parent",l()({method:"POST",params:l()({},r)},a||{})));case 1:case"end":return e.stop()}},n)})),A.apply(this,arguments)}function D(n,r){return F.apply(this,arguments)}function F(){return F=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("api/system/privilege/setting",_objectSpread({method:"POST",params:_objectSpread({},r)},a||{})));case 1:case"end":return e.stop()}},n)})),F.apply(this,arguments)}function ee(n,r){return f.apply(this,arguments)}function f(){return f=d()(t()().mark(function n(r,a){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("api/system/privilege/add",l()({data:r,method:"POST"},a||{})));case 1:case"end":return e.stop()}},n)})),f.apply(this,arguments)}function p(n,r){return E.apply(this,arguments)}function E(){return E=d()(t()().mark(function n(r,a){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("api/system/privilege/update",l()({data:r,method:"PUT"},a||{})));case 1:case"end":return e.stop()}},n)})),E.apply(this,arguments)}function o(n,r){return $.apply(this,arguments)}function $(){return $=d()(t()().mark(function n(r,a){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("api/system/privilege/delete",l()({data:r,method:"DELETE"},a||{})));case 1:case"end":return e.stop()}},n)})),$.apply(this,arguments)}function H(n,r){return B.apply(this,arguments)}function B(){return B=d()(t()().mark(function n(r,a){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("api/system/role/list",l()({method:"POST",params:l()({},r)},a||{})));case 1:case"end":return e.stop()}},n)})),B.apply(this,arguments)}function j(n,r){return K.apply(this,arguments)}function K(){return K=d()(t()().mark(function n(r,a){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("api/system/role/get",l()({params:l()({},r),method:"POST"},a||{})));case 1:case"end":return e.stop()}},n)})),K.apply(this,arguments)}function g(n,r){return h.apply(this,arguments)}function h(){return h=d()(t()().mark(function n(r,a){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("api/system/role/add",l()({data:r,method:"POST"},a||{})));case 1:case"end":return e.stop()}},n)})),h.apply(this,arguments)}function J(n,r){return C.apply(this,arguments)}function C(){return C=d()(t()().mark(function n(r,a){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("api/system/role/update",l()({data:r,method:"PUT"},a||{})));case 1:case"end":return e.stop()}},n)})),C.apply(this,arguments)}function ae(n,r){return Q.apply(this,arguments)}function Q(){return Q=d()(t()().mark(function n(r,a){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("api/system/role/delete",l()({data:r,method:"DELETE"},a||{})));case 1:case"end":return e.stop()}},n)})),Q.apply(this,arguments)}function re(n,r){return x.apply(this,arguments)}function x(){return x=d()(t()().mark(function n(r,a){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("api/system/user/list",l()({method:"POST",params:l()({},r)},a||{})));case 1:case"end":return e.stop()}},n)})),x.apply(this,arguments)}function oe(n,r){return W.apply(this,arguments)}function W(){return W=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("api/system/get",_objectSpread({params:_objectSpread({},r),method:"POST"},a||{})));case 1:case"end":return e.stop()}},n)})),W.apply(this,arguments)}function ne(n,r){return X.apply(this,arguments)}function X(){return X=d()(t()().mark(function n(r,a){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("api/system/user/add",l()({data:r,method:"POST"},a||{})));case 1:case"end":return e.stop()}},n)})),X.apply(this,arguments)}function k(n,r){return G.apply(this,arguments)}function G(){return G=d()(t()().mark(function n(r,a){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("api/system/user/update_password",l()({data:r,method:"PUT"},a||{})));case 1:case"end":return e.stop()}},n)})),G.apply(this,arguments)}function te(n,r){return q.apply(this,arguments)}function q(){return q=d()(t()().mark(function n(r,a){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("api/system/user/update",l()({data:r,method:"PUT"},a||{})));case 1:case"end":return e.stop()}},n)})),q.apply(this,arguments)}function z(n,r){return T.apply(this,arguments)}function T(){return T=d()(t()().mark(function n(r,a){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("api/system/user/delete",l()({data:r,method:"DELETE"},a||{})));case 1:case"end":return e.stop()}},n)})),T.apply(this,arguments)}function se(n,r){return Y.apply(this,arguments)}function Y(){return Y=_asyncToGenerator(_regeneratorRuntime().mark(function n(r,a){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("api/system/user/init_password",_objectSpread({data:r,method:"PUT"},a||{})));case 1:case"end":return e.stop()}},n)})),Y.apply(this,arguments)}function ue(n,r){return N.apply(this,arguments)}function N(){return N=d()(t()().mark(function n(r,a){return t()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,m.request)("api/system/task/list",l()({method:"POST",params:l()({},r)},a||{})));case 1:case"end":return e.stop()}},n)})),N.apply(this,arguments)}}}]);
