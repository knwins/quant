"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[6],{41510:function(re,O,e){var T=e(18201),s=e(75271),B=e(75256),E=e(60585),W=function(I,j){return s.createElement(E.Z,(0,T.Z)((0,T.Z)({},I),{},{ref:j,icon:B.Z}))},C=s.forwardRef(W);O.Z=C},5769:function(re,O,e){var T=e(60134),s=e(18201),B=e(66342),E=e(93954),W=e(63292),C=e(25052),$=e(18051),I=e(75271),j=e(21092),g=e(52676),k=["fieldProps","proFieldProps"],q=["fieldProps","proFieldProps"],u="text",_=function(r){var n=r.fieldProps,x=r.proFieldProps,S=(0,B.Z)(r,k);return(0,g.jsx)(j.Z,(0,s.Z)({valueType:u,fieldProps:n,filedConfig:{valueType:u},proFieldProps:x},S))},ee=function(r){var n=(0,E.Z)(r.open||!1,{value:r.open,onChange:r.onOpenChange}),x=(0,T.Z)(n,2),S=x[0],K=x[1];return(0,g.jsx)(W.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(t){var y,b=t.getFieldValue(r.name||[]);return(0,g.jsx)(C.Z,(0,s.Z)((0,s.Z)({getPopupContainer:function(a){return a&&a.parentNode?a.parentNode:a},onOpenChange:function(a){return K(a)},content:(0,g.jsxs)("div",{style:{padding:"4px 0"},children:[(y=r.statusRender)===null||y===void 0?void 0:y.call(r,b),r.strengthText?(0,g.jsx)("div",{style:{marginTop:10},children:(0,g.jsx)("span",{children:r.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},r.popoverProps),{},{open:S,children:r.children}))}})},te=function(r){var n=r.fieldProps,x=r.proFieldProps,S=(0,B.Z)(r,q),K=(0,I.useState)(!1),N=(0,T.Z)(K,2),t=N[0],y=N[1];return n!=null&&n.statusRender&&S.name?(0,g.jsx)(ee,{name:S.name,statusRender:n==null?void 0:n.statusRender,popoverProps:n==null?void 0:n.popoverProps,strengthText:n==null?void 0:n.strengthText,open:t,onOpenChange:y,children:(0,g.jsx)("div",{children:(0,g.jsx)(j.Z,(0,s.Z)({valueType:"password",fieldProps:(0,s.Z)((0,s.Z)({},(0,$.Z)(n,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(M){var a;n==null||(a=n.onBlur)===null||a===void 0||a.call(n,M),y(!1)},onClick:function(M){var a;n==null||(a=n.onClick)===null||a===void 0||a.call(n,M),y(!0)}}),proFieldProps:x,filedConfig:{valueType:u}},S))})}):(0,g.jsx)(j.Z,(0,s.Z)({valueType:"password",fieldProps:n,proFieldProps:x,filedConfig:{valueType:u}},S))},U=_;U.Password=te,U.displayName="ProFormComponent",O.Z=U},58395:function(re,O,e){e.r(O),e.d(O,{default:function(){return pe}});var T=e(90228),s=e.n(T),B=e(26068),E=e.n(B),W=e(87999),C=e.n(W),$=e(48305),I=e.n($),j=e(77648),g=e(69344),k=e(39081),q=e(41510),u=e(18201),_=e(66342),ee=e(94448),te=e(44707),U=e(82187),G=e.n(U),r=e(75271),n=e(21589),x=e(27706),S=e(46351),K=function(o){return(0,x.Z)((0,x.Z)({},o.componentCls,{"&-container":{display:"flex",flex:"1",flexDirection:"column",height:"100%",paddingInline:32,paddingBlock:24,overflow:"auto",background:"inherit"},"&-top":{textAlign:"center"},"&-header":{display:"flex",alignItems:"center",justifyContent:"center",height:"44px",lineHeight:"44px",a:{textDecoration:"none"}},"&-title":{position:"relative",insetBlockStart:"2px",color:"@heading-color",fontWeight:"600",fontSize:"33px"},"&-logo":{width:"44px",height:"44px",marginInlineEnd:"16px",verticalAlign:"top",img:{width:"100%"}},"&-desc":{marginBlockStart:"12px",marginBlockEnd:"40px",color:o.colorTextSecondary,fontSize:o.fontSize},"&-main":{minWidth:"328px",maxWidth:"580px",margin:"0 auto","&-other":{marginBlockStart:"24px",lineHeight:"22px",textAlign:"start"}}}),"@media (min-width: @screen-md-min)",(0,x.Z)({},"".concat(o.componentCls,"-container"),{paddingInline:0,paddingBlockStart:32,paddingBlockEnd:24,backgroundRepeat:"no-repeat",backgroundPosition:"center 110px",backgroundSize:"100%"}))};function N(l){return(0,S.Xj)("LoginForm",function(o){var v=(0,u.Z)((0,u.Z)({},o),{},{componentCls:".".concat(l)});return[K(v)]})}var t=e(52676),y=["logo","message","contentStyle","title","subTitle","actions","children","containerStyle","otherStyle"];function b(l){var o,v=l.logo,H=l.message,se=l.contentStyle,z=l.title,V=l.subTitle,Q=l.actions,le=l.children,X=l.containerStyle,L=l.otherStyle,f=(0,_.Z)(l,y),ne=(0,ee.YB)(),ie=f.submitter===!1?!1:(0,u.Z)((0,u.Z)({searchConfig:{submitText:ne.getMessage("loginForm.submitText","\u767B\u5F55")}},f.submitter),{},{submitButtonProps:(0,u.Z)({size:"large",style:{width:"100%"}},(o=f.submitter)===null||o===void 0?void 0:o.submitButtonProps),render:function(p,d){var h,D=d.pop();if(typeof(f==null||(h=f.submitter)===null||h===void 0?void 0:h.render)=="function"){var A,R;return f==null||(A=f.submitter)===null||A===void 0||(R=A.render)===null||R===void 0?void 0:R.call(A,p,d)}return D}}),Z=(0,r.useContext)(te.ZP.ConfigContext),Y=Z.getPrefixCls("pro-form-login"),w=N(Y),J=w.wrapSSR,F=w.hashId,i=function(p){return"".concat(Y,"-").concat(p," ").concat(F)},m=(0,r.useMemo)(function(){return v?typeof v=="string"?(0,t.jsx)("img",{src:v}):v:null},[v]);return J((0,t.jsxs)("div",{className:G()(i("container"),F),style:X,children:[(0,t.jsxs)("div",{className:"".concat(i("top")," ").concat(F).trim(),children:[z||m?(0,t.jsxs)("div",{className:"".concat(i("header")),children:[m?(0,t.jsx)("span",{className:i("logo"),children:m}):null,z?(0,t.jsx)("span",{className:i("title"),children:z}):null]}):null,V?(0,t.jsx)("div",{className:i("desc"),children:V}):null]}),(0,t.jsxs)("div",{className:i("main"),style:(0,u.Z)({width:328},se),children:[(0,t.jsxs)(n.A,(0,u.Z)((0,u.Z)({isKeyPressSubmit:!0},f),{},{submitter:ie,children:[H,le]})),Q?(0,t.jsx)("div",{className:i("main-other"),style:L,children:Q}):null]})]}))}var M=e(5769),a=e(34464),ce=e(39764),ge=e(37124),ve=e(30967),ae=e(7891),fe=(0,ge.kc)(function(l){var o=l.token;return{action:{marginLeft:"8px",color:"rgba(0, 0, 0, 0.2)",fontSize:"24px",verticalAlign:"middle",cursor:"pointer",transition:"color 0.3s","&:hover":{color:o.colorPrimaryActive}},lang:{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:o.borderRadius,":hover":{backgroundColor:o.colorBgTextHover}},container:{display:"flex",flexDirection:"column",height:"100vh",overflow:"auto",backgroundImage:"url('https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/V-_oS6r-i7wAAAAAAAAAAAAAFl94AQBr')",backgroundSize:"100% 100%"}}}),oe=function(o){var v=o.content;return(0,t.jsx)(ce.Z,{style:{marginBottom:24},message:v,type:"error",showIcon:!0})},me=function(){var o=(0,r.useState)({}),v=I()(o,2),H=v[0],se=v[1],z=(0,r.useState)("account"),V=I()(z,2),Q=V[0],le=V[1],X=(0,a.useModel)("@@initialState"),L=X.initialState,f=X.setInitialState,ne=fe(),ie=ne.styles,Z=(0,a.useIntl)(),Y=function(){var i=C()(s()().mark(function m(){var P,p;return s()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,L==null||(P=L.fetchUserInfo)===null||P===void 0?void 0:P.call(L);case 2:p=h.sent,console.log(p),p&&(0,ve.flushSync)(function(){f(function(D){return E()(E()({},D),{},{currentUser:p})})});case 5:case"end":return h.stop()}},m)}));return function(){return i.apply(this,arguments)}}(),w=function(){var i=C()(s()().mark(function m(P){var p,d,h,D,A,R,ue,de;return s()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,p=(0,a.getLocale)(),P.lang=p,c.next=5,(0,g.x4)(E()({},P));case 5:if(d=c.sent,h=d.status,D=d.token,A=d.roleGroup,!h){c.next=19;break}return R=Z.formatMessage({id:"pages.login.success"}),ae.yw.success(R),localStorage.setItem("token",D),localStorage.setItem("roleGroup",A),c.next=16,Y();case 16:return ue=new URL(window.location.href).searchParams,a.history.push(ue.get("redirect")||"/"),c.abrupt("return");case 19:return c.abrupt("return");case 22:c.prev=22,c.t0=c.catch(0),de=Z.formatMessage({id:"pages.login.failure"}),ae.yw.error(de);case 26:case"end":return c.stop()}},m,null,[[0,22]])}));return function(P){return i.apply(this,arguments)}}(),J=H.status,F=H.type;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(b,{contentStyle:{minWidth:280,maxWidth:"75vw"},logo:"/icons/icon-128x128.png",title:"VIVANEST",subTitle:"VIVANEST",initialValues:{autoLogin:!0},onFinish:function(){var i=C()(s()().mark(function m(P){return s()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,w(P);case 2:case"end":return d.stop()}},m)}));return function(m){return i.apply(this,arguments)}}(),children:[J==="error"&&F==="account"&&(0,t.jsx)(oe,{content:Z.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF(admin/ant.design)"})}),Q==="account"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.Z,{name:"username",fieldProps:{size:"large",prefix:(0,t.jsx)(k.Z,{})},placeholder:Z.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin or user"}),rules:[{required:!0,message:(0,t.jsx)(a.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,t.jsx)(M.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,t.jsx)(q.Z,{})},placeholder:Z.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: ant.design"}),rules:[{required:!0,message:(0,t.jsx)(a.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),J==="error"&&F==="mobile"&&(0,t.jsx)(oe,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"})]}),(0,t.jsx)(j.$_,{})]})},pe=me}}]);
